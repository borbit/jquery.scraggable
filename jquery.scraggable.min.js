(function(b,g){function c(a,d){this.element=a;this.options=d;this.enabled=true;this.dragStarted=false;this.stopTimer=null;if(d.containment=="parent"){if(typeof this.options.parent=="object"&&this.options.parent.jquery!==g)this.parent=this.options.parent;if(typeof this.options.parent=="object"&&this.options.parent.tagName!==g)this.parent=b(this.options.parent);if(typeof this.options.parent=="string")this.parent=b(this.options.parent);if(this.options.parent==false)this.parent=this.element.parent()}else this.parent=
b(window.document);var f=this;this.onmousewhell=function(e){f.dragStarted||f.updateLocation();f.processMouseWhell(e);if(e.preventDefault)e.preventDefault();else e.returnValue=false};this.updateLocation();this.enableWheelHandling()}b.fn.scraggable=function(a){var d=this.data("scraggable");if(typeof a=="string"&&d&&b.isFunction(b.fn.scraggable.methods[a]))b.fn.scraggable.methods[a].apply(d);else if(!d){a=b.extend({},b.fn.scraggable.defaults,a);this.data(new c(this,a))}return this};b.fn.scraggable.methods=
{enable:function(){this.enableWheelHandling()},disable:function(){this.disableWheelHandling()}};b.fn.scraggable.defaults={axis:false,parent:false,sensitivity:5,inverted:false,containment:false};c.prototype.updateLocation=function(){this.width=this.element.outerWidth();this.height=this.element.outerHeight();this.position=this.element.position();this.offset=this.element.offset();this.bounds=this.getBounds()};c.prototype.enableWheelHandling=function(){if(this.parent.get(0).addEventListener){this.parent.get(0).addEventListener("mousewheel",
this.onmousewhell,false);this.parent.get(0).addEventListener("DOMMouseScroll",this.onmousewhell,false)}};c.prototype.disableWheelHandling=function(){if(this.parent.get(0).removeEventListener){this.parent.get(0).removeEventListener("mousewheel",this.onmousewhell,false);this.parent.get(0).removeEventListener("DOMMouseScroll",this.onmousewhell,false)}};c.prototype.processMouseWhell=function(a){a=this.getWheelDelta(a);a={left:this.offset.left+a[0]*this.options.sensitivity,top:this.offset.top+a[1]*this.options.sensitivity};
if(this.bounds)a=this.fixOffset(a);this.setPosition(a)};c.prototype.fixOffset=function(a){if(a.left<this.bounds.left)a.left=this.bounds.left;if(a.left+this.width>this.bounds.right)a.left=this.bounds.right-this.width;if(a.top<this.bounds.top)a.top=this.bounds.top;if(a.top+this.height>this.bounds.bottom)a.top=this.bounds.bottom-this.height;return a};c.prototype.setPosition=function(a){var d=a.top-this.offset.top,f=a.left-this.offset.left;if(!this.options.axis||this.options.axis=="x")this.position.left+=
this.options.inverted?d:f;if(!this.options.axis||this.options.axis=="y")this.position.top+=this.options.inverted?f:d;this.element.css({top:this.position.top,left:this.position.left});this.offset=a;var e={position:this.position};if(!this.dragStarted){this.element.trigger("dragstart",e);this.dragStarted=true}this.element.trigger("drag",e);this.stopTimer&&clearTimeout(this.stopTimer);var h=this;this.stopTimer=setTimeout(function(){h.element.trigger("dragstop",e);h.dragStarted=false},100)};c.prototype.getWheelDelta=
function(a){if(a.axis!=null){if(a.axis==a.HORIZONTAL_AXIS)return[-a.detail/2,0];if(a.axis==a.VERTICAL_AXIS)return[0,-a.detail/2]}if(a.wheelDeltaX!=null&&a.wheelDeltaY!=null)return[a.wheelDeltaX/60,a.wheelDeltaY/60];if(a.detail!=null&&a.axis==null)return[0,-a.detail/2];return[0,0]};c.prototype.getBounds=function(){if(this.options.containment=="document")return{left:0,top:0,right:this.parent.width(),bottom:this.parent.height()};else if(this.options.containment=="parent"){var a=this.parent.offset();
return{left:a.left,top:a.top,right:a.left+this.parent.outerWidth(),bottom:a.top+this.parent.outerHeight()}}else if(b.isArray(this.options.containment))return{left:this.options.containment[0],top:this.options.containment[1],right:this.options.containment[2],bottom:this.options.containment[3]};return false}})(jQuery);