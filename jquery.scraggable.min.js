(function(b,d){function c(a,c){this.element=a;this.options=c;this.enabled=!0;this.dragStarted=!1;this.stopTimer=null;"object"==typeof this.options.parent&&this.options.parent.jquery!==d&&(this.parent=this.options.parent);"object"==typeof this.options.parent&&this.options.parent.tagName!==d&&(this.parent=b(this.options.parent));"string"==typeof this.options.parent&&(this.parent=b(this.options.parent));!1==this.options.parent&&(this.parent=this.element.parent());var f=this;this.onmousewheel=function(a){f.dragStarted||
f.updateLocation();f.processMouseWheel(a);a.preventDefault?a.preventDefault():a.returnValue=false};this.scaleFactor=2;-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?this.scaleFactor=1200:-1!=navigator.userAgent.indexOf("Chrome")&&(this.scaleFactor=60);this.updateLocation();this.enableWheelHandling()}b.fn.scraggable=function(a){var e=this.data("scraggable");"string"==typeof a&&e&&b.isFunction(b.fn.scraggable.methods[a])?b.fn.scraggable.methods[a].apply(e):e||(a=
b.extend({},b.fn.scraggable.defaults,a),this.data(new c(this,a)));return this};b.fn.scraggable.methods={enable:function(){this.enableWheelHandling()},disable:function(){this.disableWheelHandling()}};b.fn.scraggable.defaults={axis:!1,parent:!1,sensitivity:5,inverted:!1,containment:!1};c.prototype.updateLocation=function(){this.width=this.element.outerWidth();this.height=this.element.outerHeight();this.originalPosition=this.element.position();this.position=this.element.position();this.offset=this.element.offset();
this.bounds=this.getBounds()};c.prototype.enableWheelHandling=function(){this.parent.get(0).addEventListener&&(this.parent.get(0).addEventListener("mousewheel",this.onmousewheel,!1),this.parent.get(0).addEventListener("DOMMouseScroll",this.onmousewheel,!1))};c.prototype.disableWheelHandling=function(){this.parent.get(0).removeEventListener&&(this.parent.get(0).removeEventListener("mousewheel",this.onmousewheel,!1),this.parent.get(0).removeEventListener("DOMMouseScroll",this.onmousewheel,!1))};c.prototype.processMouseWheel=
function(a){a=this.getWheelDelta(a);a={left:this.offset.left+a[0]*this.options.sensitivity,top:this.offset.top+a[1]*this.options.sensitivity};this.bounds&&(a=this.fixOffset(a));this.setPosition(a)};c.prototype.fixOffset=function(a){a.left<this.bounds.left&&(a.left=this.bounds.left);a.left+this.width>this.bounds.right&&(a.left=this.bounds.right-this.width);a.top<this.bounds.top&&(a.top=this.bounds.top);a.top+this.height>this.bounds.bottom&&(a.top=this.bounds.bottom-this.height);return a};c.prototype.setPosition=
function(a){var b=a.top-this.offset.top,c=a.left-this.offset.left;if(!this.options.axis||"x"==this.options.axis)this.position.left+=this.options.inverted?b:c;if(!this.options.axis||"y"==this.options.axis)this.position.top+=this.options.inverted?c:b;this.element.css({top:this.position.top,left:this.position.left});this.offset=a;var g={position:this.position,originalPosition:this.originalPosition};this.dragStarted||(this.element.trigger("dragstart",g),this.dragStarted=!0);this.element.trigger("drag",
g);this.stopTimer&&clearTimeout(this.stopTimer);var d=this;this.stopTimer=setTimeout(function(){d.element.trigger("dragstop",g);d.dragStarted=false},100)};c.prototype.getWheelDelta=function(a){if(null!=a.axis){if(a.axis==a.HORIZONTAL_AXIS)return[-a.detail/this.scaleFactor,0];if(a.axis==a.VERTICAL_AXIS)return[0,-a.detail/this.scaleFactor]}return null!=a.wheelDeltaX&&null!=a.wheelDeltaY?[a.wheelDeltaX/this.scaleFactor,a.wheelDeltaY/this.scaleFactor]:null!=a.detail&&null==a.axis?[0,-a.detail/this.scaleFactor]:
[0,0]};c.prototype.getBounds=function(){if("document"==this.options.containment)return{left:0,top:0,right:this.parent.width(),bottom:this.parent.height()};if("parent"==this.options.containment){var a=this.parent.offset();return{left:a.left,top:a.top,right:a.left+this.parent.outerWidth(),bottom:a.top+this.parent.outerHeight()}}return b.isArray(this.options.containment)?{left:this.options.containment[0],top:this.options.containment[1],right:this.options.containment[2],bottom:this.options.containment[3]}:
!1}})(jQuery);