(function(b,h){function d(a,c){this.element=a;this.options=c;this.enabled=true;this.dragStarted=false;this.stopTimer=null;if(c.containment=="parent"){if(typeof this.options.parent=="object"&&this.options.parent.jquery!==h)this.parent=this.options.parent;if(typeof this.options.parent=="object"&&this.options.parent.tagName!==h)this.parent=b(this.options.parent);if(typeof this.options.parent=="string")this.parent=b(this.options.parent);if(this.options.parent==false)this.parent=this.element.parent()}else this.parent=
b(window.document);var g=this;this.onmousewhell=function(e){g.dragStarted||g.updateLocation();g.processMouseWhell(e);if(e.preventDefault)e.preventDefault();else e.returnValue=false};this.updateLocation();this.enableWheelHandling()}var f={};b.fn.scraggable=function(a){var c=this.selector;if(typeof a=="string"&&b.isFunction(b.fn.scraggable.methods[a]))b.fn.scraggable.methods[a](c);else{a=b.extend({},b.fn.scraggable.defaults,a);this.each(function(){if(f[c]==null)f[c]=[];f[c].push(new d(b(this),a))})}return this};
b.fn.scraggable.methods={enable:function(a){f[a]!=null&&b.each(f[a],function(){this.enableWheelHandling()})},disable:function(a){f[a]!=null&&b.each(f[a],function(){this.disableWheelHandling()})}};b.fn.scraggable.defaults={axis:false,parent:false,sensitivity:5,inverted:false,containment:false};d.prototype.updateLocation=function(){this.width=this.element.outerWidth();this.height=this.element.outerHeight();this.position=this.element.position();this.offset=this.element.offset();this.bounds=this.getBounds()};
d.prototype.enableWheelHandling=function(){if(this.parent.get(0).addEventListener){this.parent.get(0).addEventListener("mousewheel",this.onmousewhell,false);this.parent.get(0).addEventListener("DOMMouseScroll",this.onmousewhell,false)}};d.prototype.disableWheelHandling=function(){if(this.parent.get(0).removeEventListener){this.parent.get(0).removeEventListener("mousewheel",this.onmousewhell,false);this.parent.get(0).removeEventListener("DOMMouseScroll",this.onmousewhell,false)}};d.prototype.processMouseWhell=
function(a){a=this.getWheelDelta(a);a={left:this.offset.left+a[0]*this.options.sensitivity,top:this.offset.top+a[1]*this.options.sensitivity};if(this.bounds)a=this.fixOffset(a);this.setPosition(a)};d.prototype.fixOffset=function(a){if(a.left<this.bounds.left)a.left=this.bounds.left;if(a.left+this.width>this.bounds.right)a.left=this.bounds.right-this.width;if(a.top<this.bounds.top)a.top=this.bounds.top;if(a.top+this.height>this.bounds.bottom)a.top=this.bounds.bottom-this.height;return a};d.prototype.setPosition=
function(a){var c=a.top-this.offset.top,g=a.left-this.offset.left;if(!this.options.axis||this.options.axis=="x")this.position.left+=this.options.inverted?c:g;if(!this.options.axis||this.options.axis=="y")this.position.top+=this.options.inverted?g:c;this.element.css({top:this.position.top,left:this.position.left});this.offset=a;var e={position:this.position};if(!this.dragStarted){this.element.trigger("dragstart",e);this.dragStarted=true}this.element.trigger("drag",e);this.stopTimer&&clearTimeout(this.stopTimer);
var i=this;this.stopTimer=setTimeout(function(){i.element.trigger("dragstop",e);i.dragStarted=false},100)};d.prototype.getWheelDelta=function(a){if(a.axis!=null){if(a.axis==a.HORIZONTAL_AXIS)return[-a.detail/2,0];if(a.axis==a.VERTICAL_AXIS)return[0,-a.detail/2]}if(a.wheelDeltaX!=null&&a.wheelDeltaY!=null)return[a.wheelDeltaX/60,a.wheelDeltaY/60];if(a.detail!=null&&a.axis==null)return[0,-a.detail/2];return[0,0]};d.prototype.getBounds=function(){if(this.options.containment=="document")return{left:0,
top:0,right:this.parent.width(),bottom:this.parent.height()};else if(this.options.containment=="parent"){var a=this.parent.offset();return{left:a.left,top:a.top,right:a.left+this.parent.outerWidth(),bottom:a.top+this.parent.outerHeight()}}else if(b.isArray(this.options.containment))return{left:this.options.containment[0],top:this.options.containment[1],right:this.options.containment[2],bottom:this.options.containment[3]};return false}})(jQuery);